{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PrimitiveClaim = void 0;\nvar PrimitiveClaim = /** @class */function () {\n  function PrimitiveClaim(config) {\n    var _this = this;\n    this.validators = {\n      hasValue: function (val, maxAgeInSeconds, id) {\n        if (maxAgeInSeconds === void 0) {\n          maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n        }\n        return {\n          id: id !== undefined ? id : _this.id,\n          refresh: function (ctx) {\n            return _this.refresh(ctx);\n          },\n          shouldRefresh: function (payload, ctx) {\n            return _this.getValueFromPayload(payload, ctx) === undefined ||\n            // We know payload[this.id] is defined since the value is not undefined in this branch\n            maxAgeInSeconds !== undefined && payload[_this.id].t < Date.now() - maxAgeInSeconds * 1000;\n          },\n          validate: function (payload, ctx) {\n            var claimVal = _this.getValueFromPayload(payload, ctx);\n            if (claimVal === undefined) {\n              return {\n                isValid: false,\n                reason: {\n                  message: \"value does not exist\",\n                  expectedValue: val,\n                  actualValue: claimVal\n                }\n              };\n            }\n            var ageInSeconds = (Date.now() - _this.getLastFetchedTime(payload, ctx)) / 1000;\n            if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n              return {\n                isValid: false,\n                reason: {\n                  message: \"expired\",\n                  ageInSeconds: ageInSeconds,\n                  maxAgeInSeconds: maxAgeInSeconds\n                }\n              };\n            }\n            if (claimVal !== val) {\n              return {\n                isValid: false,\n                reason: {\n                  message: \"wrong value\",\n                  expectedValue: val,\n                  actualValue: claimVal\n                }\n              };\n            }\n            return {\n              isValid: true\n            };\n          }\n        };\n      }\n    };\n    this.id = config.id;\n    this.refresh = config.refresh;\n    this.defaultMaxAgeInSeconds = config.defaultMaxAgeInSeconds;\n  }\n  PrimitiveClaim.prototype.getValueFromPayload = function (payload, _userContext) {\n    return payload[this.id] !== undefined ? payload[this.id].v : undefined;\n  };\n  PrimitiveClaim.prototype.getLastFetchedTime = function (payload, _userContext) {\n    return payload[this.id] !== undefined ? payload[this.id].t : undefined;\n  };\n  return PrimitiveClaim;\n}();\nexports.PrimitiveClaim = PrimitiveClaim;","map":{"version":3,"names":["Object","defineProperty","exports","value","PrimitiveClaim","config","_this","validators","hasValue","val","maxAgeInSeconds","id","defaultMaxAgeInSeconds","undefined","refresh","ctx","shouldRefresh","payload","getValueFromPayload","t","Date","now","validate","claimVal","isValid","reason","message","expectedValue","actualValue","ageInSeconds","getLastFetchedTime","prototype","_userContext","v"],"sources":["C:/Users/jsierra/puntodelaguaapp/frontend/node_modules/supertokens-website/lib/build/claims/primitiveClaim.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrimitiveClaim = void 0;\nvar PrimitiveClaim = /** @class */ (function() {\n    function PrimitiveClaim(config) {\n        var _this = this;\n        this.validators = {\n            hasValue: function(val, maxAgeInSeconds, id) {\n                if (maxAgeInSeconds === void 0) {\n                    maxAgeInSeconds = _this.defaultMaxAgeInSeconds;\n                }\n                return {\n                    id: id !== undefined ? id : _this.id,\n                    refresh: function(ctx) {\n                        return _this.refresh(ctx);\n                    },\n                    shouldRefresh: function(payload, ctx) {\n                        return (\n                            _this.getValueFromPayload(payload, ctx) === undefined ||\n                            // We know payload[this.id] is defined since the value is not undefined in this branch\n                            (maxAgeInSeconds !== undefined && payload[_this.id].t < Date.now() - maxAgeInSeconds * 1000)\n                        );\n                    },\n                    validate: function(payload, ctx) {\n                        var claimVal = _this.getValueFromPayload(payload, ctx);\n                        if (claimVal === undefined) {\n                            return {\n                                isValid: false,\n                                reason: { message: \"value does not exist\", expectedValue: val, actualValue: claimVal }\n                            };\n                        }\n                        var ageInSeconds = (Date.now() - _this.getLastFetchedTime(payload, ctx)) / 1000;\n                        if (maxAgeInSeconds !== undefined && ageInSeconds > maxAgeInSeconds) {\n                            return {\n                                isValid: false,\n                                reason: {\n                                    message: \"expired\",\n                                    ageInSeconds: ageInSeconds,\n                                    maxAgeInSeconds: maxAgeInSeconds\n                                }\n                            };\n                        }\n                        if (claimVal !== val) {\n                            return {\n                                isValid: false,\n                                reason: { message: \"wrong value\", expectedValue: val, actualValue: claimVal }\n                            };\n                        }\n                        return { isValid: true };\n                    }\n                };\n            }\n        };\n        this.id = config.id;\n        this.refresh = config.refresh;\n        this.defaultMaxAgeInSeconds = config.defaultMaxAgeInSeconds;\n    }\n    PrimitiveClaim.prototype.getValueFromPayload = function(payload, _userContext) {\n        return payload[this.id] !== undefined ? payload[this.id].v : undefined;\n    };\n    PrimitiveClaim.prototype.getLastFetchedTime = function(payload, _userContext) {\n        return payload[this.id] !== undefined ? payload[this.id].t : undefined;\n    };\n    return PrimitiveClaim;\n})();\nexports.PrimitiveClaim = PrimitiveClaim;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}