{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ProcessLocking = /** @class */function () {\n  function ProcessLocking() {\n    var _this = this;\n    this.locked = new Map();\n    this.addToLocked = function (key, toAdd) {\n      var callbacks = _this.locked.get(key);\n      if (callbacks === undefined) {\n        if (toAdd === undefined) {\n          _this.locked.set(key, []);\n        } else {\n          _this.locked.set(key, [toAdd]);\n        }\n      } else {\n        if (toAdd !== undefined) {\n          callbacks.unshift(toAdd);\n          _this.locked.set(key, callbacks);\n        }\n      }\n    };\n    this.isLocked = function (key) {\n      return _this.locked.has(key);\n    };\n    this.lock = function (key) {\n      return new Promise(function (resolve, reject) {\n        if (_this.isLocked(key)) {\n          _this.addToLocked(key, resolve);\n        } else {\n          _this.addToLocked(key);\n          resolve();\n        }\n      });\n    };\n    this.unlock = function (key) {\n      var callbacks = _this.locked.get(key);\n      if (callbacks === undefined || callbacks.length === 0) {\n        _this.locked.delete(key);\n        return;\n      }\n      var toCall = callbacks.pop();\n      _this.locked.set(key, callbacks);\n      if (toCall !== undefined) {\n        setTimeout(toCall, 0);\n      }\n    };\n  }\n  ProcessLocking.getInstance = function () {\n    if (ProcessLocking.instance === undefined) {\n      ProcessLocking.instance = new ProcessLocking();\n    }\n    return ProcessLocking.instance;\n  };\n  return ProcessLocking;\n}();\nfunction getLock() {\n  return ProcessLocking.getInstance();\n}\nexports.default = getLock;","map":{"version":3,"names":["Object","defineProperty","exports","value","ProcessLocking","_this","locked","Map","addToLocked","key","toAdd","callbacks","get","undefined","set","unshift","isLocked","has","lock","Promise","resolve","reject","unlock","length","delete","toCall","pop","setTimeout","getInstance","instance","getLock","default"],"sources":["C:/Users/jsierra/puntodelaguaapp/frontend/node_modules/browser-tabs-lock/processLock.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProcessLocking = /** @class */ (function () {\n    function ProcessLocking() {\n        var _this = this;\n        this.locked = new Map();\n        this.addToLocked = function (key, toAdd) {\n            var callbacks = _this.locked.get(key);\n            if (callbacks === undefined) {\n                if (toAdd === undefined) {\n                    _this.locked.set(key, []);\n                }\n                else {\n                    _this.locked.set(key, [toAdd]);\n                }\n            }\n            else {\n                if (toAdd !== undefined) {\n                    callbacks.unshift(toAdd);\n                    _this.locked.set(key, callbacks);\n                }\n            }\n        };\n        this.isLocked = function (key) {\n            return _this.locked.has(key);\n        };\n        this.lock = function (key) {\n            return new Promise(function (resolve, reject) {\n                if (_this.isLocked(key)) {\n                    _this.addToLocked(key, resolve);\n                }\n                else {\n                    _this.addToLocked(key);\n                    resolve();\n                }\n            });\n        };\n        this.unlock = function (key) {\n            var callbacks = _this.locked.get(key);\n            if (callbacks === undefined || callbacks.length === 0) {\n                _this.locked.delete(key);\n                return;\n            }\n            var toCall = callbacks.pop();\n            _this.locked.set(key, callbacks);\n            if (toCall !== undefined) {\n                setTimeout(toCall, 0);\n            }\n        };\n    }\n    ProcessLocking.getInstance = function () {\n        if (ProcessLocking.instance === undefined) {\n            ProcessLocking.instance = new ProcessLocking();\n        }\n        return ProcessLocking.instance;\n    };\n    return ProcessLocking;\n}());\nfunction getLock() {\n    return ProcessLocking.getInstance();\n}\nexports.default = getLock;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,IAAIC,cAAc,GAAG,aAAe,YAAY;EAC5C,SAASA,cAAc,GAAG;IACtB,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACC,MAAM,GAAG,IAAIC,GAAG,EAAE;IACvB,IAAI,CAACC,WAAW,GAAG,UAAUC,GAAG,EAAEC,KAAK,EAAE;MACrC,IAAIC,SAAS,GAAGN,KAAK,CAACC,MAAM,CAACM,GAAG,CAACH,GAAG,CAAC;MACrC,IAAIE,SAAS,KAAKE,SAAS,EAAE;QACzB,IAAIH,KAAK,KAAKG,SAAS,EAAE;UACrBR,KAAK,CAACC,MAAM,CAACQ,GAAG,CAACL,GAAG,EAAE,EAAE,CAAC;QAC7B,CAAC,MACI;UACDJ,KAAK,CAACC,MAAM,CAACQ,GAAG,CAACL,GAAG,EAAE,CAACC,KAAK,CAAC,CAAC;QAClC;MACJ,CAAC,MACI;QACD,IAAIA,KAAK,KAAKG,SAAS,EAAE;UACrBF,SAAS,CAACI,OAAO,CAACL,KAAK,CAAC;UACxBL,KAAK,CAACC,MAAM,CAACQ,GAAG,CAACL,GAAG,EAAEE,SAAS,CAAC;QACpC;MACJ;IACJ,CAAC;IACD,IAAI,CAACK,QAAQ,GAAG,UAAUP,GAAG,EAAE;MAC3B,OAAOJ,KAAK,CAACC,MAAM,CAACW,GAAG,CAACR,GAAG,CAAC;IAChC,CAAC;IACD,IAAI,CAACS,IAAI,GAAG,UAAUT,GAAG,EAAE;MACvB,OAAO,IAAIU,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;QAC1C,IAAIhB,KAAK,CAACW,QAAQ,CAACP,GAAG,CAAC,EAAE;UACrBJ,KAAK,CAACG,WAAW,CAACC,GAAG,EAAEW,OAAO,CAAC;QACnC,CAAC,MACI;UACDf,KAAK,CAACG,WAAW,CAACC,GAAG,CAAC;UACtBW,OAAO,EAAE;QACb;MACJ,CAAC,CAAC;IACN,CAAC;IACD,IAAI,CAACE,MAAM,GAAG,UAAUb,GAAG,EAAE;MACzB,IAAIE,SAAS,GAAGN,KAAK,CAACC,MAAM,CAACM,GAAG,CAACH,GAAG,CAAC;MACrC,IAAIE,SAAS,KAAKE,SAAS,IAAIF,SAAS,CAACY,MAAM,KAAK,CAAC,EAAE;QACnDlB,KAAK,CAACC,MAAM,CAACkB,MAAM,CAACf,GAAG,CAAC;QACxB;MACJ;MACA,IAAIgB,MAAM,GAAGd,SAAS,CAACe,GAAG,EAAE;MAC5BrB,KAAK,CAACC,MAAM,CAACQ,GAAG,CAACL,GAAG,EAAEE,SAAS,CAAC;MAChC,IAAIc,MAAM,KAAKZ,SAAS,EAAE;QACtBc,UAAU,CAACF,MAAM,EAAE,CAAC,CAAC;MACzB;IACJ,CAAC;EACL;EACArB,cAAc,CAACwB,WAAW,GAAG,YAAY;IACrC,IAAIxB,cAAc,CAACyB,QAAQ,KAAKhB,SAAS,EAAE;MACvCT,cAAc,CAACyB,QAAQ,GAAG,IAAIzB,cAAc,EAAE;IAClD;IACA,OAAOA,cAAc,CAACyB,QAAQ;EAClC,CAAC;EACD,OAAOzB,cAAc;AACzB,CAAC,EAAG;AACJ,SAAS0B,OAAO,GAAG;EACf,OAAO1B,cAAc,CAACwB,WAAW,EAAE;AACvC;AACA1B,OAAO,CAAC6B,OAAO,GAAGD,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}