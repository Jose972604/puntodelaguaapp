{"ast":null,"code":"\"use strict\";\n\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    throw: verb(1),\n    return: verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFormattedFormField = exports.mergeFormFields = exports.normaliseResetPasswordUsingTokenFeature = exports.getDefaultFormFields = exports.normaliseSignInFormFeatureConfig = exports.normaliseSignUpFormFeatureConfig = exports.normaliseSignInAndUpFeature = exports.normaliseEmailPasswordConfig = void 0;\nvar constants_1 = require(\"./constants\");\nvar validators_1 = require(\"./validators\");\nvar utils_1 = require(\"../authRecipe/utils\");\nfunction normaliseEmailPasswordConfig(config) {\n  var signInAndUpFeature = normaliseSignInAndUpFeature(config.signInAndUpFeature);\n  var signUpPasswordField = signInAndUpFeature.signUpForm.formFields.find(function (field) {\n    return field.id === \"password\";\n  });\n  var signUpEmailField = signInAndUpFeature.signUpForm.formFields.find(function (field) {\n    return field.id === \"email\";\n  });\n  var resetPasswordUsingTokenFeature = normaliseResetPasswordUsingTokenFeature(signUpPasswordField.validate, signUpEmailField, config.resetPasswordUsingTokenFeature);\n  var override = __assign({\n    functions: function (originalImplementation) {\n      return originalImplementation;\n    },\n    components: {}\n  }, config.override);\n  return __assign(__assign({}, (0, utils_1.normaliseAuthRecipe)(config)), {\n    signInAndUpFeature: signInAndUpFeature,\n    resetPasswordUsingTokenFeature: resetPasswordUsingTokenFeature,\n    override: override\n  });\n}\nexports.normaliseEmailPasswordConfig = normaliseEmailPasswordConfig;\nfunction normaliseSignInAndUpFeature(config) {\n  if (config === undefined) {\n    config = {};\n  }\n  var disableDefaultUI = config.disableDefaultUI === true;\n  var signUpForm = normaliseSignUpFormFeatureConfig(config.signUpForm);\n  var defaultToSignUp = config.defaultToSignUp !== undefined ? config.defaultToSignUp : false;\n  /*\n   * Default Sign In corresponds to computed Sign Up fields filtered by email and password only.\n   * i.e. If the user overrides sign Up fields, that is propagated to default sign In fields.\n   * Exception made of the password validator which only verifies that the value is not empty for login\n   * https://github.com/supertokens/supertokens-auth-react/issues/21\n   */\n  var defaultSignInFields = signUpForm.formFields.reduce(function (signInFieldsAccumulator, field) {\n    if (field.id === \"email\") {\n      return __spreadArray(__spreadArray([], signInFieldsAccumulator, true), [field], false);\n    }\n    if (field.id === \"password\") {\n      return __spreadArray(__spreadArray([], signInFieldsAccumulator, true), [__assign(__assign({}, field), {\n        autoComplete: \"current-password\",\n        validate: validators_1.defaultLoginPasswordValidator\n      })], false);\n    }\n    return signInFieldsAccumulator;\n  }, []);\n  var signInForm = normaliseSignInFormFeatureConfig(defaultSignInFields, config.signInForm);\n  return {\n    disableDefaultUI: disableDefaultUI,\n    defaultToSignUp: defaultToSignUp,\n    signUpForm: signUpForm,\n    signInForm: signInForm\n  };\n}\nexports.normaliseSignInAndUpFeature = normaliseSignInAndUpFeature;\nfunction normaliseSignUpFormFeatureConfig(config) {\n  if (config === undefined) {\n    config = {};\n  }\n  var defaultFormFields = getDefaultFormFields();\n  var userFormFields = [];\n  if (config.formFields !== undefined) {\n    userFormFields = config.formFields;\n  }\n  var formFields = mergeFormFields(defaultFormFields, userFormFields);\n  var privacyPolicyLink = config.privacyPolicyLink;\n  var termsOfServiceLink = config.termsOfServiceLink;\n  var style = config.style !== undefined ? config.style : {};\n  return {\n    style: style,\n    formFields: formFields,\n    privacyPolicyLink: privacyPolicyLink,\n    termsOfServiceLink: termsOfServiceLink\n  };\n}\nexports.normaliseSignUpFormFeatureConfig = normaliseSignUpFormFeatureConfig;\nfunction normaliseSignInFormFeatureConfig(defaultFormFields, config) {\n  if (config === undefined) {\n    config = {};\n  }\n  var userFormFields = [];\n  if (config.formFields !== undefined) {\n    userFormFields = config.formFields\n    // Filter on email and password only.\n    .filter(function (field) {\n      return constants_1.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(field.id);\n    })\n    // Sign In fields are never optional.\n    .map(function (field) {\n      return __assign(__assign({}, field), {\n        optional: false\n      });\n    });\n  }\n  var formFields = mergeFormFields(defaultFormFields, userFormFields);\n  var style = config.style !== undefined ? config.style : {};\n  return {\n    style: style,\n    formFields: formFields\n  };\n}\nexports.normaliseSignInFormFeatureConfig = normaliseSignInFormFeatureConfig;\nfunction getDefaultFormFields() {\n  return [getDefaultEmailFormField(), getDefaultPasswordFormField()];\n}\nexports.getDefaultFormFields = getDefaultFormFields;\nfunction getDefaultEmailFormField() {\n  return {\n    id: \"email\",\n    label: \"EMAIL_PASSWORD_EMAIL_LABEL\",\n    placeholder: \"EMAIL_PASSWORD_EMAIL_PLACEHOLDER\",\n    validate: validators_1.defaultEmailValidator,\n    optional: false,\n    autoComplete: \"email\"\n  };\n}\nfunction getDefaultPasswordFormField() {\n  return {\n    id: \"password\",\n    label: \"EMAIL_PASSWORD_PASSWORD_LABEL\",\n    placeholder: \"EMAIL_PASSWORD_PASSWORD_PLACEHOLDER\",\n    validate: validators_1.defaultPasswordValidator,\n    optional: false,\n    autoComplete: \"new-password\"\n  };\n}\nfunction normaliseResetPasswordUsingTokenFeature(signUpPasswordFieldValidate, signUpEmailField, config) {\n  if (config === undefined) {\n    config = {};\n  }\n  var disableDefaultUI = config.disableDefaultUI === true;\n  var submitNewPasswordFormStyle = config.submitNewPasswordForm !== undefined && config.submitNewPasswordForm.style !== undefined ? config.submitNewPasswordForm.style : {};\n  var submitNewPasswordForm = {\n    style: submitNewPasswordFormStyle,\n    formFields: [{\n      id: \"password\",\n      label: \"EMAIL_PASSWORD_NEW_PASSWORD_LABEL\",\n      placeholder: \"EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER\",\n      validate: signUpPasswordFieldValidate,\n      optional: false,\n      autoComplete: \"new-password\"\n    }, {\n      id: \"confirm-password\",\n      label: \"EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL\",\n      placeholder: \"EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER\",\n      validate: signUpPasswordFieldValidate,\n      optional: false,\n      autoComplete: \"new-password\"\n    }]\n  };\n  var enterEmailFormStyle = config.enterEmailForm !== undefined && config.enterEmailForm.style !== undefined ? config.enterEmailForm.style : {};\n  var enterEmailForm = {\n    style: enterEmailFormStyle,\n    formFields: [__assign(__assign({}, getDefaultEmailFormField()), {\n      validate: signUpEmailField.validate,\n      placeholder: \"\",\n      autofocus: true\n    })]\n  };\n  return {\n    disableDefaultUI: disableDefaultUI,\n    submitNewPasswordForm: submitNewPasswordForm,\n    enterEmailForm: enterEmailForm\n  };\n}\nexports.normaliseResetPasswordUsingTokenFeature = normaliseResetPasswordUsingTokenFeature;\n/*\n * mergeFormFields by keeping the provided order, defaultFormFields or merged first, and unmerged userFormFields after.\n */\nfunction mergeFormFields(defaultFormFields, userFormFields) {\n  // Create a new array with default fields.\n  var mergedFormFields = defaultFormFields;\n  // Loop through user provided fields.\n  for (var i = 0; i < userFormFields.length; i++) {\n    var userField = userFormFields[i];\n    var isNewField = true;\n    // Loop through the merged fields array.\n    for (var j = 0; j < mergedFormFields.length; j++) {\n      var mergedField = mergedFormFields[j];\n      // If id is equal, merge the fields\n      if (userField.id === mergedField.id) {\n        // Make sure that email and password are kept mandatory.\n        var optional = mergedField.optional; // Init with default value.\n        // If user provided value, overwrite.\n        if (userField.optional !== undefined) {\n          optional = userField.optional;\n        }\n        // If \"email\" or \"password\", always mandatory.\n        if (constants_1.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(userField.id)) {\n          optional = false;\n        }\n        // Merge.\n        mergedFormFields[j] = __assign(__assign(__assign({}, mergedFormFields[j]), userField), {\n          optional: optional\n        });\n        isNewField = false;\n        break;\n      }\n    }\n    // If new field, push to mergeFormFields.\n    if (isNewField) {\n      mergedFormFields.push(__assign({\n        optional: false,\n        placeholder: userField.label,\n        validate: validators_1.defaultValidate\n      }, userField));\n    }\n  }\n  return mergedFormFields.map(function (field) {\n    return getFormattedFormField(field);\n  });\n}\nexports.mergeFormFields = mergeFormFields;\nfunction getFormattedFormField(field) {\n  var _this = this;\n  return __assign(__assign({}, field), {\n    validate: function (value) {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              // Absent or not optional empty field\n              if (value === \"\" && field.optional === false) {\n                return [2 /*return*/, \"ERROR_NON_OPTIONAL\"];\n              }\n              return [4 /*yield*/, field.validate(value)];\n            case 1:\n              return [2 /*return*/, _a.sent()];\n          }\n        });\n      });\n    }\n  });\n}\nexports.getFormattedFormField = getFormattedFormField;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArray","to","from","pack","l","ar","Array","slice","concat","defineProperty","exports","getFormattedFormField","mergeFormFields","normaliseResetPasswordUsingTokenFeature","getDefaultFormFields","normaliseSignInFormFeatureConfig","normaliseSignUpFormFeatureConfig","normaliseSignInAndUpFeature","normaliseEmailPasswordConfig","constants_1","require","validators_1","utils_1","config","signInAndUpFeature","signUpPasswordField","signUpForm","formFields","find","field","id","signUpEmailField","resetPasswordUsingTokenFeature","validate","override","functions","originalImplementation","components","normaliseAuthRecipe","undefined","disableDefaultUI","defaultToSignUp","defaultSignInFields","reduce","signInFieldsAccumulator","autoComplete","defaultLoginPasswordValidator","signInForm","defaultFormFields","userFormFields","privacyPolicyLink","termsOfServiceLink","style","filter","MANDATORY_FORM_FIELDS_ID_ARRAY","includes","map","optional","getDefaultEmailFormField","getDefaultPasswordFormField","placeholder","defaultEmailValidator","defaultPasswordValidator","signUpPasswordFieldValidate","submitNewPasswordFormStyle","submitNewPasswordForm","enterEmailFormStyle","enterEmailForm","autofocus","mergedFormFields","userField","isNewField","j","mergedField","defaultValidate","_this","_a"],"sources":["C:/Users/jsierra/puntodelaguaapp/frontend/node_modules/supertokens-auth-react/lib/build/recipe/emailpassword/utils.js"],"sourcesContent":["\"use strict\";\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __assign =\n    (this && this.__assign) ||\n    function () {\n        __assign =\n            Object.assign ||\n            function (t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function (thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function (resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function (resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function (thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function () {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: [],\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function () {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function (v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nvar __spreadArray =\n    (this && this.__spreadArray) ||\n    function (to, from, pack) {\n        if (pack || arguments.length === 2)\n            for (var i = 0, l = from.length, ar; i < l; i++) {\n                if (ar || !(i in from)) {\n                    if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                    ar[i] = from[i];\n                }\n            }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFormattedFormField =\n    exports.mergeFormFields =\n    exports.normaliseResetPasswordUsingTokenFeature =\n    exports.getDefaultFormFields =\n    exports.normaliseSignInFormFeatureConfig =\n    exports.normaliseSignUpFormFeatureConfig =\n    exports.normaliseSignInAndUpFeature =\n    exports.normaliseEmailPasswordConfig =\n        void 0;\nvar constants_1 = require(\"./constants\");\nvar validators_1 = require(\"./validators\");\nvar utils_1 = require(\"../authRecipe/utils\");\nfunction normaliseEmailPasswordConfig(config) {\n    var signInAndUpFeature = normaliseSignInAndUpFeature(config.signInAndUpFeature);\n    var signUpPasswordField = signInAndUpFeature.signUpForm.formFields.find(function (field) {\n        return field.id === \"password\";\n    });\n    var signUpEmailField = signInAndUpFeature.signUpForm.formFields.find(function (field) {\n        return field.id === \"email\";\n    });\n    var resetPasswordUsingTokenFeature = normaliseResetPasswordUsingTokenFeature(\n        signUpPasswordField.validate,\n        signUpEmailField,\n        config.resetPasswordUsingTokenFeature\n    );\n    var override = __assign(\n        {\n            functions: function (originalImplementation) {\n                return originalImplementation;\n            },\n            components: {},\n        },\n        config.override\n    );\n    return __assign(__assign({}, (0, utils_1.normaliseAuthRecipe)(config)), {\n        signInAndUpFeature: signInAndUpFeature,\n        resetPasswordUsingTokenFeature: resetPasswordUsingTokenFeature,\n        override: override,\n    });\n}\nexports.normaliseEmailPasswordConfig = normaliseEmailPasswordConfig;\nfunction normaliseSignInAndUpFeature(config) {\n    if (config === undefined) {\n        config = {};\n    }\n    var disableDefaultUI = config.disableDefaultUI === true;\n    var signUpForm = normaliseSignUpFormFeatureConfig(config.signUpForm);\n    var defaultToSignUp = config.defaultToSignUp !== undefined ? config.defaultToSignUp : false;\n    /*\n     * Default Sign In corresponds to computed Sign Up fields filtered by email and password only.\n     * i.e. If the user overrides sign Up fields, that is propagated to default sign In fields.\n     * Exception made of the password validator which only verifies that the value is not empty for login\n     * https://github.com/supertokens/supertokens-auth-react/issues/21\n     */\n    var defaultSignInFields = signUpForm.formFields.reduce(function (signInFieldsAccumulator, field) {\n        if (field.id === \"email\") {\n            return __spreadArray(__spreadArray([], signInFieldsAccumulator, true), [field], false);\n        }\n        if (field.id === \"password\") {\n            return __spreadArray(\n                __spreadArray([], signInFieldsAccumulator, true),\n                [\n                    __assign(__assign({}, field), {\n                        autoComplete: \"current-password\",\n                        validate: validators_1.defaultLoginPasswordValidator,\n                    }),\n                ],\n                false\n            );\n        }\n        return signInFieldsAccumulator;\n    }, []);\n    var signInForm = normaliseSignInFormFeatureConfig(defaultSignInFields, config.signInForm);\n    return {\n        disableDefaultUI: disableDefaultUI,\n        defaultToSignUp: defaultToSignUp,\n        signUpForm: signUpForm,\n        signInForm: signInForm,\n    };\n}\nexports.normaliseSignInAndUpFeature = normaliseSignInAndUpFeature;\nfunction normaliseSignUpFormFeatureConfig(config) {\n    if (config === undefined) {\n        config = {};\n    }\n    var defaultFormFields = getDefaultFormFields();\n    var userFormFields = [];\n    if (config.formFields !== undefined) {\n        userFormFields = config.formFields;\n    }\n    var formFields = mergeFormFields(defaultFormFields, userFormFields);\n    var privacyPolicyLink = config.privacyPolicyLink;\n    var termsOfServiceLink = config.termsOfServiceLink;\n    var style = config.style !== undefined ? config.style : {};\n    return {\n        style: style,\n        formFields: formFields,\n        privacyPolicyLink: privacyPolicyLink,\n        termsOfServiceLink: termsOfServiceLink,\n    };\n}\nexports.normaliseSignUpFormFeatureConfig = normaliseSignUpFormFeatureConfig;\nfunction normaliseSignInFormFeatureConfig(defaultFormFields, config) {\n    if (config === undefined) {\n        config = {};\n    }\n    var userFormFields = [];\n    if (config.formFields !== undefined) {\n        userFormFields = config.formFields\n            // Filter on email and password only.\n            .filter(function (field) {\n                return constants_1.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(field.id);\n            })\n            // Sign In fields are never optional.\n            .map(function (field) {\n                return __assign(__assign({}, field), { optional: false });\n            });\n    }\n    var formFields = mergeFormFields(defaultFormFields, userFormFields);\n    var style = config.style !== undefined ? config.style : {};\n    return {\n        style: style,\n        formFields: formFields,\n    };\n}\nexports.normaliseSignInFormFeatureConfig = normaliseSignInFormFeatureConfig;\nfunction getDefaultFormFields() {\n    return [getDefaultEmailFormField(), getDefaultPasswordFormField()];\n}\nexports.getDefaultFormFields = getDefaultFormFields;\nfunction getDefaultEmailFormField() {\n    return {\n        id: \"email\",\n        label: \"EMAIL_PASSWORD_EMAIL_LABEL\",\n        placeholder: \"EMAIL_PASSWORD_EMAIL_PLACEHOLDER\",\n        validate: validators_1.defaultEmailValidator,\n        optional: false,\n        autoComplete: \"email\",\n    };\n}\nfunction getDefaultPasswordFormField() {\n    return {\n        id: \"password\",\n        label: \"EMAIL_PASSWORD_PASSWORD_LABEL\",\n        placeholder: \"EMAIL_PASSWORD_PASSWORD_PLACEHOLDER\",\n        validate: validators_1.defaultPasswordValidator,\n        optional: false,\n        autoComplete: \"new-password\",\n    };\n}\nfunction normaliseResetPasswordUsingTokenFeature(signUpPasswordFieldValidate, signUpEmailField, config) {\n    if (config === undefined) {\n        config = {};\n    }\n    var disableDefaultUI = config.disableDefaultUI === true;\n    var submitNewPasswordFormStyle =\n        config.submitNewPasswordForm !== undefined && config.submitNewPasswordForm.style !== undefined\n            ? config.submitNewPasswordForm.style\n            : {};\n    var submitNewPasswordForm = {\n        style: submitNewPasswordFormStyle,\n        formFields: [\n            {\n                id: \"password\",\n                label: \"EMAIL_PASSWORD_NEW_PASSWORD_LABEL\",\n                placeholder: \"EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER\",\n                validate: signUpPasswordFieldValidate,\n                optional: false,\n                autoComplete: \"new-password\",\n            },\n            {\n                id: \"confirm-password\",\n                label: \"EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL\",\n                placeholder: \"EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER\",\n                validate: signUpPasswordFieldValidate,\n                optional: false,\n                autoComplete: \"new-password\",\n            },\n        ],\n    };\n    var enterEmailFormStyle =\n        config.enterEmailForm !== undefined && config.enterEmailForm.style !== undefined\n            ? config.enterEmailForm.style\n            : {};\n    var enterEmailForm = {\n        style: enterEmailFormStyle,\n        formFields: [\n            __assign(__assign({}, getDefaultEmailFormField()), {\n                validate: signUpEmailField.validate,\n                placeholder: \"\",\n                autofocus: true,\n            }),\n        ],\n    };\n    return {\n        disableDefaultUI: disableDefaultUI,\n        submitNewPasswordForm: submitNewPasswordForm,\n        enterEmailForm: enterEmailForm,\n    };\n}\nexports.normaliseResetPasswordUsingTokenFeature = normaliseResetPasswordUsingTokenFeature;\n/*\n * mergeFormFields by keeping the provided order, defaultFormFields or merged first, and unmerged userFormFields after.\n */\nfunction mergeFormFields(defaultFormFields, userFormFields) {\n    // Create a new array with default fields.\n    var mergedFormFields = defaultFormFields;\n    // Loop through user provided fields.\n    for (var i = 0; i < userFormFields.length; i++) {\n        var userField = userFormFields[i];\n        var isNewField = true;\n        // Loop through the merged fields array.\n        for (var j = 0; j < mergedFormFields.length; j++) {\n            var mergedField = mergedFormFields[j];\n            // If id is equal, merge the fields\n            if (userField.id === mergedField.id) {\n                // Make sure that email and password are kept mandatory.\n                var optional = mergedField.optional; // Init with default value.\n                // If user provided value, overwrite.\n                if (userField.optional !== undefined) {\n                    optional = userField.optional;\n                }\n                // If \"email\" or \"password\", always mandatory.\n                if (constants_1.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(userField.id)) {\n                    optional = false;\n                }\n                // Merge.\n                mergedFormFields[j] = __assign(__assign(__assign({}, mergedFormFields[j]), userField), {\n                    optional: optional,\n                });\n                isNewField = false;\n                break;\n            }\n        }\n        // If new field, push to mergeFormFields.\n        if (isNewField) {\n            mergedFormFields.push(\n                __assign(\n                    { optional: false, placeholder: userField.label, validate: validators_1.defaultValidate },\n                    userField\n                )\n            );\n        }\n    }\n    return mergedFormFields.map(function (field) {\n        return getFormattedFormField(field);\n    });\n}\nexports.mergeFormFields = mergeFormFields;\nfunction getFormattedFormField(field) {\n    var _this = this;\n    return __assign(__assign({}, field), {\n        validate: function (value) {\n            return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            // Absent or not optional empty field\n                            if (value === \"\" && field.optional === false) {\n                                return [2 /*return*/, \"ERROR_NON_OPTIONAL\"];\n                            }\n                            return [4 /*yield*/, field.validate(value)];\n                        case 1:\n                            return [2 /*return*/, _a.sent()];\n                    }\n                });\n            });\n        },\n    });\n}\nexports.getFormattedFormField = getFormattedFormField;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}