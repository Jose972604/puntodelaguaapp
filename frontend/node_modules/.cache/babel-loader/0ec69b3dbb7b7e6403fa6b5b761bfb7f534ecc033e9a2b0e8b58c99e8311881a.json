{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    default: mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar jsx_runtime_1 = require(\"@emotion/react/jsx-runtime\");\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\n/*\n * Imports.\n */\nvar react_1 = require(\"react\");\nvar session_1 = require(\"../session\");\nvar utils_1 = require(\"../../utils\");\nvar recipe_1 = __importDefault(require(\"../session/recipe\"));\nvar usercontext_1 = require(\"../../usercontext\");\n/**\n * AuthWidgetWrapper shows the children component only if no session exists,\n * else it calls onSessionAlreadyExists\n */\nvar AuthWidgetWrapper = function (props) {\n  return (0, jsx_runtime_1.jsx)(session_1.SessionAuth, __assign({\n    requireAuth: false,\n    doRedirection: false\n  }, {\n    children: (0, jsx_runtime_1.jsx)(Redirector, __assign({}, props))\n  }));\n};\nvar Redirector = function (props) {\n  var sessionContext = (0, react_1.useContext)(session_1.SessionContext);\n  var userContext = (0, usercontext_1.useUserContext)();\n  var _a = (0, react_1.useState)(false),\n    alwaysShow = _a[0],\n    updateAlwaysShow = _a[1];\n  (0, react_1.useEffect)(function () {\n    // we want to do this just once, so we supply it with only the loading state.\n    // if we supply it with props, sessionContext, then once the user signs in, then this will route the\n    // user to the dashboard, as opposed to the sign up / sign in functions.\n    if (sessionContext.loading === false) {\n      if (sessionContext.doesSessionExist) {\n        if (props.onSessionAlreadyExists !== undefined) {\n          props.onSessionAlreadyExists();\n        } else {\n          props.authRecipe.config.onHandleEvent({\n            action: \"SESSION_ALREADY_EXISTS\"\n          });\n          void recipe_1.default.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection({\n            rid: props.authRecipe.config.recipeId,\n            successRedirectContext: {\n              action: \"SUCCESS\",\n              isNewUser: false,\n              redirectToPath: (0, utils_1.getRedirectToPathFromURL)()\n            }\n          }, userContext, props.history);\n        }\n      } else {\n        // this means even if a session exists, we will still show the children\n        // cause the child component will take care of redirecting etc..\n        updateAlwaysShow(true);\n      }\n    }\n  }, [sessionContext.loading]);\n  if ((sessionContext.loading === true || sessionContext.doesSessionExist) && !alwaysShow) {\n    return null;\n  } else {\n    return (0, jsx_runtime_1.jsx)(jsx_runtime_1.Fragment, {\n      children: props.children\n    });\n  }\n};\nexports.default = AuthWidgetWrapper;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","default","defineProperty","exports","value","jsx_runtime_1","require","react_1","session_1","utils_1","recipe_1","usercontext_1","AuthWidgetWrapper","props","jsx","SessionAuth","requireAuth","doRedirection","children","Redirector","sessionContext","useContext","SessionContext","userContext","useUserContext","_a","useState","alwaysShow","updateAlwaysShow","useEffect","loading","doesSessionExist","onSessionAlreadyExists","undefined","authRecipe","config","onHandleEvent","action","getInstanceOrThrow","validateGlobalClaimsAndHandleSuccessRedirection","rid","recipeId","successRedirectContext","isNewUser","redirectToPath","getRedirectToPathFromURL","history","Fragment"],"sources":["C:/Users/jsierra/puntodelaguaapp/frontend/node_modules/supertokens-auth-react/lib/build/recipe/authRecipe/authWidgetWrapper.js"],"sourcesContent":["\"use strict\";\nvar __assign =\n    (this && this.__assign) ||\n    function () {\n        __assign =\n            Object.assign ||\n            function (t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __importDefault =\n    (this && this.__importDefault) ||\n    function (mod) {\n        return mod && mod.__esModule ? mod : { default: mod };\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_runtime_1 = require(\"@emotion/react/jsx-runtime\");\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\n/*\n * Imports.\n */\nvar react_1 = require(\"react\");\nvar session_1 = require(\"../session\");\nvar utils_1 = require(\"../../utils\");\nvar recipe_1 = __importDefault(require(\"../session/recipe\"));\nvar usercontext_1 = require(\"../../usercontext\");\n/**\n * AuthWidgetWrapper shows the children component only if no session exists,\n * else it calls onSessionAlreadyExists\n */\nvar AuthWidgetWrapper = function (props) {\n    return (0, jsx_runtime_1.jsx)(\n        session_1.SessionAuth,\n        __assign(\n            { requireAuth: false, doRedirection: false },\n            { children: (0, jsx_runtime_1.jsx)(Redirector, __assign({}, props)) }\n        )\n    );\n};\nvar Redirector = function (props) {\n    var sessionContext = (0, react_1.useContext)(session_1.SessionContext);\n    var userContext = (0, usercontext_1.useUserContext)();\n    var _a = (0, react_1.useState)(false),\n        alwaysShow = _a[0],\n        updateAlwaysShow = _a[1];\n    (0, react_1.useEffect)(\n        function () {\n            // we want to do this just once, so we supply it with only the loading state.\n            // if we supply it with props, sessionContext, then once the user signs in, then this will route the\n            // user to the dashboard, as opposed to the sign up / sign in functions.\n            if (sessionContext.loading === false) {\n                if (sessionContext.doesSessionExist) {\n                    if (props.onSessionAlreadyExists !== undefined) {\n                        props.onSessionAlreadyExists();\n                    } else {\n                        props.authRecipe.config.onHandleEvent({\n                            action: \"SESSION_ALREADY_EXISTS\",\n                        });\n                        void recipe_1.default.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(\n                            {\n                                rid: props.authRecipe.config.recipeId,\n                                successRedirectContext: {\n                                    action: \"SUCCESS\",\n                                    isNewUser: false,\n                                    redirectToPath: (0, utils_1.getRedirectToPathFromURL)(),\n                                },\n                            },\n                            userContext,\n                            props.history\n                        );\n                    }\n                } else {\n                    // this means even if a session exists, we will still show the children\n                    // cause the child component will take care of redirecting etc..\n                    updateAlwaysShow(true);\n                }\n            }\n        },\n        [sessionContext.loading]\n    );\n    if ((sessionContext.loading === true || sessionContext.doesSessionExist) && !alwaysShow) {\n        return null;\n    } else {\n        return (0, jsx_runtime_1.jsx)(jsx_runtime_1.Fragment, { children: props.children });\n    }\n};\nexports.default = AuthWidgetWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}